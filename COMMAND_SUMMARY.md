# Command Summary - libclang AST Workflow

## Simplified Commands

### 1. Build AST from C++ Codebase
```bash
python -m agent5 build-ast --project_path /path/to/project -o ast.json
```

**Required:**
- `--project_path`: C++ project root directory

**Optional:**
- `-o, --output`: Output JSON file (default: `<project_path>/ast_with_calls.json`)
- `--compile-args`: Compilation arguments (default: `-std=c++17`)

### 2. Generate Flowchart from JSON AST
```bash
python -m agent5 flowchart --ast-json ast.json --function main --out flow.mmd
```

**Required:**
- `--ast-json`: Path to JSON AST file (generated by `build-ast`)
- `--out`: Output path for `.mmd` file

**Optional:**
- `--function`: Entry function name (auto-detect if not specified)
- `--file`: Reference C++ file path (optional, for reference only)
- `--detail-level`: `high`, `medium`, or `deep` (default: `medium`)
- `--max-steps`: Maximum steps (default: 30)
- `--use-llm`: Use LLM for translation (optional)
- `--chat-model`: Chat model name
- `--ollama-base-url`: Ollama URL

## What Changed

### Removed:
- ❌ `--file` / `--scenario` mutual exclusivity requirement
- ❌ `--scenario` mode (required RAG/collection)
- ❌ `--collection` parameter (RAG-specific)
- ❌ `--project-path` requirement for flowchart command

### Simplified:
- ✅ `--ast-json` is now **required** for flowchart command
- ✅ `--function` is optional (auto-detects first function)
- ✅ `--file` is optional (for reference only)
- ✅ No RAG/indexing dependencies

## Example Workflow

```bash
# Step 1: Build AST
python -m agent5 build-ast \
  --project_path ./my_cpp_project \
  -o ./ast_with_calls.json

# Step 2: Generate flowchart
python -m agent5 flowchart \
  --ast-json ./ast_with_calls.json \
  --function main \
  --out ./flowchart.mmd \
  --detail-level medium
```

## Notes

- The `build-ast` command generates LLM descriptions for each function, so it may take time
- The `flowchart` command only needs the JSON AST file - no source files or project paths required
- Function name matching is case-insensitive and supports partial matches




